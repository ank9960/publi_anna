<!DOCTYPE html>
<html>

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>IoTCare</title>

    <!-- Bootstrap Core CSS -->
    <link href="./static/css/bootstrap/bootstrap.min.css" rel="stylesheet">

	<!-- Custom Fonts / icon css -->
    <link href="./static/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- MetisMenu CSS / left navbar dropdown css -->
    <link href="./static/css/metismenu/metisMenu.min.css" rel="stylesheet">

	<!-- Custom CSS -->
    <link href="./static/css/custom/custom.css" rel="stylesheet">

	<!-- jQuery js / knob chart를 위해 위에 있어야 함 -->
    <script src="./static/js/jquery.min.js"></script>
	<script src="./static/js/jquery.knob.min.js"></script>

	<!-- jQuery knob chart -->
	<script>
            $(function($) {

                $(".knob").knob({
                    change : function (value) {
                        //console.log("change : " + value);
                    },
                    release : function (value) {
                        //console.log(this.$.attr('value'));
                        console.log("release : " + value);
                    },
                    cancel : function () {
                        console.log("cancel : ", this);
                    },
                    /*format : function (value) {
                        return value + '%';
                    },*/
                    draw : function () {

                        // "tron" case
                        if(this.$.data('skin') == 'tron') {

                            this.cursorExt = 0.3;

                            var a = this.arc(this.cv)  // Arc
                                , pa                   // Previous arc
                                , r = 1;

                            this.g.lineWidth = this.lineWidth;

                            if (this.o.displayPrevious) {
                                pa = this.arc(this.v);
                                this.g.beginPath();
                                this.g.strokeStyle = this.pColor;
                                this.g.arc(this.xy, this.xy, this.radius - this.lineWidth, pa.s, pa.e, pa.d);
                                this.g.stroke();
                            }

                            this.g.beginPath();
                            this.g.strokeStyle = r ? this.o.fgColor : this.fgColor ;
                            this.g.arc(this.xy, this.xy, this.radius - this.lineWidth, a.s, a.e, a.d);
                            this.g.stroke();

                            this.g.lineWidth = 2;
                            this.g.beginPath();
                            this.g.strokeStyle = this.o.fgColor;
                            this.g.arc( this.xy, this.xy, this.radius - this.lineWidth + 1 + this.lineWidth * 2 / 3, 0, 2 * Math.PI, false);
                            this.g.stroke();

                            return false;
                        }
                    }
                });
            });
        </script>

</head>

<body>

    <div id="wrapper">

        <!-- Navigation -->
        <nav class="navbar navbar-default navbar-static-top" role="navigation" style="margin-bottom: 0">
            <div class="navbar-header">
				<!-- 해상도에 따라 sidebar를 숨기고 button toggle로 나타냄 -->
				<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
				<!-- button toggle end -->
                <a class="navbar-brand" href="index.html">IoTCare</a>
            </div>

            <div class="navbar-default sidebar" role="navigation">
                <div class="sidebar-nav navbar-collapse">
                    <ul class="nav sidebar-top" id="side-menu">

                        <li>
                            <a href="index.html"><i class="fa fa-dashboard fa-fw"></i> Dashboard</a>
                        </li>
                        <li>
                            <a href="iot_avail.html" onclick="load_iotavail();"><i class="fa fa-television fa-fw"></i> IoT Availability<span class="fa arrow"></span></a>
							<ul class="nav nav-second-level">
                                <li>
                                    <a href="exploit_device.html"><i class="fa fa-tablet fa-fw"></i> Exploit 검출된 Device<span class="fa arrow"></span></a>
									<ul class="nav nav-third-level">
                                        <li>
                                            <a href="#">LV1</a>
                                        </li>
                                        <li>
                                            <a href="#">LV2</a>
                                        </li>
                                        <li>
                                            <a href="#">LV3</a>
                                        </li>
                                    </ul>
                                    <!-- /.nav-third-level -->
                                </li>
                                <li>
                                    <a href="sensor.html"><i class="fa fa-bell-o fa-fw"></i> Sensor<span class="fa arrow"></span></a>
                                    <ul class="nav nav-third-level">
                                        <li>
                                            <a href="#">AP1</a>
                                        </li>
                                        <li>
                                            <a href="#">AP2</a>
                                        </li>
                                        <li>
                                            <a href="#">AP3</a>
                                        </li>
                                    </ul>
                                    <!-- /.nav-third-level -->
                                </li>
                            </ul>
                            <!-- /.nav-second-level -->
                        </li>
                        <li>
                            <a href="network_avail.html"><i class="fa fa-sitemap fa-fw"></i> Network Availability</a>
                        </li>
                    </ul>
                </div>
                <!-- /.sidebar-collapse -->
            </div>
            <!-- /.navbar-static-side -->
        </nav>

        <div id="page-wrapper">
            <div class="row">
				<div class="col-lg-12">
                    <div id="date" class="page-header"></div>
                </div>
				<!-- /.col-lg-12 -->
			</div>
			<!-- /.row -->
            <div class="row">
				<div class="col-lg-6">
					<div class="panel panel-default">
						<div class="panel-heading">
							연결된 STATION
						</div>
                        <!-- /.panel-heading -->
                        <div class="panel-body">
							<div id="station_count" style="display: relative; cursor: pointer; min-width: 290px; height: 320px; margin: 0 auto" onclick="load_iotavail();"></div>
                        </div>
                        <!-- /.panel-body -->
                    </div>
                    <!-- /.panel -->
                </div>
				<!-- /.con-lg-6 -->
				<div class="col-lg-6">
					<div class="panel panel-default">
						<div class="panel-heading">
							연결된 STATION TYPE
						</div>
                        <!-- /.panel-heading -->
                        <div class="panel-body">
                            <div id="station_type" style="cursor: pointer; min-width: 290px; height: 320px; max-width: 600px; margin: 0 auto" onclick="load_iotavail();"></div>
                        </div>
                        <!-- /.panel-body -->
                    </div>
                    <!-- /.panel -->
                </div>
				<!-- /.con-lg-6 -->
				<div class="col-lg-6">
					<div class="panel panel-default">
						<div class="panel-heading">
							OPENPORT
						</div>
                        <!-- /.panel-heading -->
                        <div class="panel-body">
							<div id="openport" style="cursor: pointer; min-width: 290px; height: 320px; max-width: 600px; margin: 0 auto" onclick="load_iotavail();"></div>
                        </div>
                        <!-- /.panel-body -->
                    </div>
                    <!-- /.panel -->
                </div>
				<!-- /.con-lg-6 -->
				<div class="col-lg-6">
					<div class="panel panel-default">
						<div class="panel-heading">
							EXPLOIT 검출된 DEVICE
						</div>
                        <!-- /.panel-heading -->
                        <div class="panel-body">
                            <div id="exploit_device" style="cursor: pointer; min-height: 280px; min-width: 290px; max-width: 600px; margin: 0 auto" onclick="load_exploit_device();"></div>
							<button type="button" class="btn btn-info btn-align" data-toggle="modal" data-target="#exploit_modal"><i class="fa fa-bar-chart"></i></button>
                        </div>
                        <!-- /.panel-body -->
                    </div>
                    <!-- /.panel -->
                </div>
				<!-- /.con-lg-6 -->
				<div class="col-lg-6">
					<div class="panel panel-default">
						<div class="panel-heading">
							WIDS SCANNER LOG
						</div>
                        <!-- /.panel-heading -->
                        <div class="panel-body">
							<div id="wids_log" style="cursor: pointer; min-width: 290px; height: 320px; max-width: 600px; margin: 0 auto" onclick="load_log();"></div>
                        </div>
                        <!-- /.panel-body -->
                    </div>
                    <!-- /.panel -->
                </div>
				<!-- /.con-lg-6 -->
				<div class="col-lg-6">
					<div class="panel panel-default">
						<div class="panel-heading">
							SECURITY CHECK LOG
						</div>
                        <!-- /.panel-heading -->
                        <div class="panel-body text-center">
							<br />
                            <div onclick="load_log();" style="cursor: pointer;"><input class="knob" value="50" data-max="100" data-height="240" data-width="240" data-fgcolor="#ff9494" data-readonly=true style="cursor: pointer"></div>
							<br />
							<div><button type="button" class="btn btn-info btn-align" data-toggle="modal" data-target="#log_modal"><i class="fa fa-bar-chart"></i></button></div>
                        </div>
                        <!-- /.panel-body -->
                    </div>
                    <!-- /.panel -->
                </div>
				<!-- /.con-lg-6 -->
            </div>
			<!-- /.row -->
        </div>
        <!-- /#page-wrapper -->

		<div class="page-footer">
			<div class="text-center">
				Copyright ⓒ 2017 Norma All rights reserved.
			</div>
		</div>
		<!-- /#page-footer -->

    </div>
    <!-- /#wrapper -->

	<!-- Modal -->
	<div class="modal fade" id="exploit_modal" role="dialog">
		<div class="modal-dialog">
			<!-- Modal content-->
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal">&times;</button>
					<h4 class="modal-title">EXPLOIT 검출된 DEVICE</h4>
				</div>
				<div class="modal-body">
					<div class="panel panel-default" style="margin-bottom: 0px;">
						<div class="panel-body">
							<div id="exploit_term" style="height: 320px;"></div>
						</div>
					</div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default modal-btn" data-dismiss="modal">Close</button>
				</div>
			</div>
		</div>
	</div>

	<div class="modal fade" id="log_modal" role="dialog">
		<div class="modal-dialog">
			<!-- Modal content-->
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal">&times;</button>
					<h4 class="modal-title">SECURITY CHECK LOG</h4>
				</div>
				<div class="modal-body">
					<div class="panel panel-default" style="margin-bottom: 0px;">
						<div class="panel-body">
							<div id="log_term" style="height: 320px;"></div>
						</div>
					</div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default modal-btn" data-dismiss="modal">Close</button>
				</div>
			</div>
		</div>
	</div>
	<!-- Modal end -->

    <!-- Bootstrap Core JavaScript -->
    <script src="../static/js/bootstrap.min.js"></script>

    <!-- Metis Menu Plugin JavaScript -->
    <script src="../static/js/metisMenu.min.js"></script>

    <!-- Custom Theme JavaScript -->
    <script src="../static/js/custom.js"></script>

	<!-- Highchart JavaScript -->
	<script src="../static/js/highchart.js"></script>
	<script src="../static/js/exporting.js"></script>

	<!-- HighChart -->
	<script>
	$(document).ready( function() {
		var date = new Date();
		var m = date.getMonth()+1;
		var d = date.getDate()-1;
		var y = date.getFullYear();
		document.getElementById('date').innerHTML = '<i class="fa fa-calendar-check-o"></i> Date : ' + y + '-' + m + '-' + d;
	});

	Highcharts.setOptions({
    colors: ['#ff9494', '#FFFEAD', '#54f9ff', '#8fff8c', '#FEE5FF', '#FFAA87', '#41E8BF', '#ECBAFF', '#41B6E8', '#FFFEFC']
	});

	/* 연결된 Station */
	Highcharts.chart('station_count', {
	credits: { enabled: false },
	exporting: { enabled: false },
    chart: {
        type: 'column',
		backgroundColor: 'transparent'
    },
    title: {
        text: ''
    },
    xAxis: {
        type: 'category',
        labels: {
            rotation: -45,
            style: {
                fontSize: '13px',
                fontFamily: 'Verdana, sans-serif',
				color: '#fff'
            }
        }
    },
    yAxis: {
        min: 0,
		labels: { style : { color: '#fff' } },
        title: {
            text: 'Values',
			style: { color: '#fff'}
        }
    },
    legend: {
        enabled: false
    },
    series: [{
        name: 'count',
		color: '#44A9A8',
        data: [
            ['station1', 23],
            ['station2', 16],
            ['station3', 14],
            ['station4', 14],
            ['station5', 12],
            ['station6', 12],
            ['station7', 9],
            ['station8', 30],
            ['station9', 4],
            ['station10', 35]
        ],
        dataLabels: {
            enabled: true,
            rotation: -90,
            color: '#FFFFFF',
            align: 'right',
            format: '{point.y:.0f}', // one decimal
            y: 10, // 10 pixels down from the top
            style: {
                fontSize: '13px',
                fontFamily: 'Verdana, sans-serif'
            }
        }
    }]
	});

	/* 연결된 Station Type */
	Highcharts.chart('station_type', {
	credits: { enabled: false },
	exporting: { enabled: false },
    chart: {
        plotBackgroundColor: null,
        plotBorderWidth: null,
        plotShadow: false,
        type: 'pie',
		backgroundColor: 'transparent'
    },
    title: {
        text: ''
    },
    tooltip: {
        pointFormat: '{series.name}: <b>{point.y}</b>'
    },
    plotOptions: {
        pie: {
            allowPointSelect: true,
            cursor: 'pointer',
			innerSize: '20%',
            dataLabels: {
				distance: 10,
                enabled: true,
                format: '<b>{point.name}</b>: {point.y} ({point.percentage:.0f}%)',
                style: {
                    color: '#fff',
					fontSize: '13px',
					textOutline: false
                }
            }
        }
    },
    series: [{
        name: 'count',
        colorByPoint: true,
		borderColor: '#236681',
		borderWidth: 3,
        data: [{
            name: 'PC',
            y: 50
        }, {
            name: 'Phone',
            y: 20
        }, {
            name: 'iPad',
            y: 10
        }, {
            name: 'AP',
            y: 30
        }]
    }]
	});

	/* Openport */
	Highcharts.chart('openport', {
	credits: { enabled: false },
	exporting: { enabled: false },
    chart: {
        plotBackgroundColor: null,
        plotBorderWidth: null,
        plotShadow: false,
        type: 'pie',
		backgroundColor: 'transparent'
    },
    title: {
        text: ''
    },
    tooltip: {
        pointFormat: '{series.name}: <b>{point.y}</b>'
    },
    plotOptions: {
        pie: {
            allowPointSelect: true,
            cursor: 'pointer',
			innerSize: '20%',
            dataLabels: {
				distance: 10,
                enabled: true,
                format: '<b>{point.name}</b>: {point.y} ({point.percentage:.0f}%)',
                style: {
                    color: '#fff',
					fontSize: '13px',
					textOutline: false
                }
            }
        }
    },
    series: [{
        name: 'count',
        colorByPoint: true,
		borderColor: '#236681',
		borderWidth: 3,
        data: [{
            name: 'port1',
            y: 10
        }, {
            name: 'port2',
            y: 20
        }, {
            name: 'port3',
            y: 50
        }, {
            name: 'port4',
            y: 30
        }, {
            name: 'port5',
            y: 40
        }]
    }]
	});

	/* EXPLOIT 검출된 DEVICE */
	Highcharts.chart('exploit_device', {
	credits: { enabled: false },
	exporting: { enabled: false },
    chart: {
        plotBackgroundColor: null,
        plotBorderWidth: null,
        plotShadow: false,
        type: 'pie',
		backgroundColor: 'transparent'
    },
    title: {
        text: ''
    },
    tooltip: {
        pointFormat: '{series.name}: <b>{point.y}</b>'
    },
    plotOptions: {
        pie: {
            allowPointSelect: true,
            cursor: 'pointer',
			innerSize: '20%',
            dataLabels: {
				distance: 10,
                enabled: true,
                format: '<b>{point.name}</b>: {point.y} ({point.percentage:.0f}%)',
                style: {
                    color: '#fff',
					fontSize: '13px',
					textOutline: false
                }
            }
        }
    },
    series: [{
        name: 'count',
        colorByPoint: true,
		borderColor: '#236681',
		borderWidth: 3,
        data: [{
            name: 'LV1',
            y: 15
        }, {
            name: 'LV2',
            y: 40
        }, {
            name: 'LV3',
            y: 45
        }]
    }]
	});

	/* WIDS Scanner log */
	Highcharts.chart('wids_log', {
	credits: { enabled: false },
	exporting: { enabled: false },
    chart: {
        plotBackgroundColor: null,
        plotBorderWidth: null,
        plotShadow: false,
        type: 'pie',
		backgroundColor: 'transparent'
    },
    title: {
        text: ''
    },
    tooltip: {
        pointFormat: '{series.name}: <b>{point.y}</b>'
    },
    plotOptions: {
        pie: {
            allowPointSelect: true,
            cursor: 'pointer',
			innerSize: '20%',
            dataLabels: {
				distance: 10,
                enabled: true,
                format: '<b>{point.name}</b>: {point.y} ({point.percentage:.0f}%)',
                style: {
                    color: '#fff',
					fontSize: '13px',
					textOutline: false
                }
            }
        }
    },
    series: [{
        name: 'count',
        colorByPoint: true,
		borderColor: '#236681',
		borderWidth: 3,
        data: [{
            name: 'Attack A',
            y: 40
        }, {
            name: 'Attack B',
            y: 25
        }, {
            name: 'Attack C',
            y: 35
        }]
    }]
	});

	/* exploit 검출된 device 모달창 */
	$(function () {
	Highcharts.chart('exploit_term', {
	credits: { enabled: false },
	exporting: { enabled: false },
    chart: {
        type: 'column',
		backgroundColor: 'transparent'
    },
    title: {
        text: ''
    },
    xAxis: {
        categories: ['0301', '0302', '0303', '0304', '0305', '0306', '0307'],
		labels: { style: { color: '#fff' } }
    },
    yAxis: {
        min: 0,
        title: {
            text: 'Value',
			style: { color: '#fff' }
        },
        stackLabels: {
            enabled: true,
            style: {
                fontWeight: 'bold',
                color: 'white'
            }
        },
		labels: { style: { color: '#fff' } }
    },
    legend: {
        align: 'right',
        x: -5,
        verticalAlign: 'top',
        y: -10,
        floating: true,
        backgroundColor: 'rgba(255,255,255,0.9)',
        borderColor: '#fff',
        borderWidth: 1,
        shadow: false
    },
    tooltip: {
        headerFormat: '<b>{point.x}</b><br/>',
        pointFormat: '{series.name}: {point.y}<br/>Total: {point.stackTotal}'
    },
    plotOptions: {
        column: {
            stacking: 'normal',
            dataLabels: {
                enabled: true,
                color: 'white'
            }
        }
    },
    series: [{
        name: 'LV1',
        data: [50, 30, 40, 70, 20, 50, 20]
    }, {
        name: 'LV2',
        data: [20, 20, 30, 20, 10, 30, 40]
    }, {
        name: 'LV3',
        data: [30, 50, 40, 30, 70, 30, 60]
    }]
	});

	var chart = $('#exploit_term').highcharts();
    $('#exploit_modal').on('show.bs.modal', function() {
        $('#exploit_term').css('visibility', 'hidden');
    });
    $('#exploit_modal').on('shown.bs.modal', function() {
        $('#exploit_term').css('visibility', 'initial');
        chart.reflow();
    });
	});

	/* SECURITY CHECK LOG 모달창 */
	$(function () {
    Highcharts.chart('log_term', {
	credits: { enabled: false },
	exporting: { enabled: false },
    chart: {
        type: 'column',
		backgroundColor: 'transparent'
    },
    title: {
        text: ''
    },
    xAxis: {
        type: 'category',
        labels: {
            rotation: -45,
            style: {
                fontSize: '13px',
                fontFamily: 'Verdana, sans-serif',
				color: '#fff'
            }
        }
    },
    yAxis: {
        min: 0,
		labels: { style : { color: '#fff' } },
        title: {
            text: 'Values',
			style: { color: '#fff'}
        }
    },
    legend: {
        enabled: false
    },
    series: [{
        name: 'count',
		color: '#44A9A8',
        data: [
            ['0301', 23],
            ['0302', 16],
            ['0303', 14],
            ['0304', 14],
            ['0305', 12],
            ['0306', 12],
            ['0307', 9]
        ],
        dataLabels: {
            enabled: true,
            rotation: -90,
            color: '#FFFFFF',
            align: 'right',
            format: '{point.y:.0f}', // one decimal
            y: 10, // 10 pixels down from the top
            style: {
                fontSize: '13px',
                fontFamily: 'Verdana, sans-serif'
            }
        }
    }]
	});

	var chart = $('#log_term').highcharts();
    $('#log_modal').on('show.bs.modal', function() {
        $('#log_term').css('visibility', 'hidden');
    });
    $('#log_modal').on('shown.bs.modal', function() {
        $('#log_term').css('visibility', 'initial');
        chart.reflow();
    });
	});

	function load_iotavail() {
		window.location.href="iot_avail.html";
	}

	function load_exploit_device() {
		window.location.href="exploit_device.html";
	}

	function load_log() {
		window.location.href="network_avail.html";
	}


	</script>

</body>

</html>
